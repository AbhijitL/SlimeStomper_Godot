[gd_scene load_steps=10 format=2]

[ext_resource path="res://Source/Entities/Player/Player.tscn" type="PackedScene" id=1]
[ext_resource path="res://Source/Entities/Camera/Camera.tscn" type="PackedScene" id=2]
[ext_resource path="res://Source/UI/UI.tscn" type="PackedScene" id=3]
[ext_resource path="res://Assets/Models/Dungeon/DungeonTileSetConfi.meshlib" type="MeshLibrary" id=4]
[ext_resource path="res://Assets/EnvironmentData/WorldLevelProto.tres" type="Environment" id=5]
[ext_resource path="res://Source/Entities/Enemy/EnemyBase.tscn" type="PackedScene" id=6]
[ext_resource path="res://Source/Entities/Environment/TransitionDoor.tscn" type="PackedScene" id=7]
[ext_resource path="res://Source/Scenes/GameManager.gd" type="Script" id=8]

[sub_resource type="NavigationMesh" id=1]
vertices = PoolVector3Array( -6.8693, 0.92512, -9.44336, -7.1693, 0.92512, -5.24336, -6.2693, 0.92512, -4.64336, 0.9307, 0.92512, -2.24336, 1.8307, 0.92512, -3.74336, 3.3307, 0.92512, -9.44336, 1.8307, 0.92512, -3.74336, 3.3307, 0.92512, -3.74336, 3.3307, 0.92512, -9.44336, -6.2693, 0.92512, -4.64336, -6.2693, 0.92512, -2.54336, 0.9307, 0.92512, -2.24336, 3.3307, 0.92512, -9.44336, 3.3307, 0.92512, -3.74336, 4.5307, 0.92512, -3.74336, 3.3307, 0.92512, -9.44336, 4.5307, 0.92512, -3.74336, 5.4307, 0.92512, -2.24336, 12.6307, 0.92512, -2.54336, 13.2307, 0.92512, -9.44336, -8.6693, 0.92512, -1.04336, -8.6693, 0.92512, 2.25664, -7.1693, 0.92512, 2.25664, -7.1693, 0.92512, -1.04336, -6.2693, 0.92512, 3.15664, -6.2693, 0.92512, 5.55664, 0.9307, 0.92512, 5.55664, 1.8307, 0.92512, 4.35664, 3.3307, 0.92512, 4.35664, 3.3307, 0.92512, 1.05664, 1.8307, 0.92512, 1.05664, 0.9307, 0.92512, 0.156639, 0.9307, 0.92512, -2.24336, -6.2693, 0.92512, -2.54336, 1.8307, 0.92512, 4.35664, 1.8307, 0.92512, 1.05664, 0.9307, 0.92512, 0.156639, -7.1693, 0.92512, -1.04336, -7.1693, 0.92512, 2.25664, -6.2693, 0.92512, 3.15664, 0.9307, 0.92512, 5.55664, 1.8307, 0.92512, 4.35664, 0.9307, 0.92512, 0.156639, -6.2693, 0.92512, -2.54336, -7.1693, 0.92512, -1.04336, -6.2693, 0.92512, 3.15664, 4.5307, 0.92512, 1.05664, 3.3307, 0.92512, 1.05664, 3.3307, 0.92512, 4.35664, 4.5307, 0.92512, 4.35664, 12.6307, 0.92512, -2.54336, 5.4307, 0.92512, -2.24336, 5.4307, 0.92512, 0.156639, 13.5307, 0.92512, 2.25664, 15.0307, 0.92512, 2.25664, 15.0307, 0.92512, -1.04336, 13.5307, 0.92512, -1.04336, 5.4307, 0.92512, 5.55664, 12.6307, 0.92512, 5.55664, 12.6307, 0.92512, 3.15664, 5.4307, 0.92512, 0.156639, 4.5307, 0.92512, 1.05664, 4.5307, 0.92512, 4.35664, 12.6307, 0.92512, 3.15664, 13.5307, 0.92512, 2.25664, 13.5307, 0.92512, -1.04336, 5.4307, 0.92512, 0.156639, 4.5307, 0.92512, 4.35664, 5.4307, 0.92512, 5.55664, 12.6307, 0.92512, 3.15664, 13.5307, 0.92512, -1.04336, 12.6307, 0.92512, -2.54336, -8.6693, 0.92512, 2.25664, -8.6693, 0.92512, -1.04336, -10.1693, 0.92512, -1.04336, -10.1693, 0.92512, 2.25664, -22.7693, 0.92512, -1.64336, -23.3693, 0.92512, -1.04336, -23.3693, 0.92512, 2.25664, -22.7693, 0.92512, 2.85664, -16.7693, 0.92512, 2.85664, -16.7693, 0.92512, -1.64336, -10.4693, 0.92512, 2.85664, -10.1693, 0.92512, 2.25664, -10.1693, 0.92512, -1.04336, -10.4693, 0.92512, -1.64336, -16.7693, 0.92512, -1.64336, -16.7693, 0.92512, 2.85664, 15.0307, 0.92512, -1.04336, 15.0307, 0.92512, 2.25664, 16.5307, 0.92512, 2.25664, 16.5307, 0.92512, -1.04336, 22.8307, 0.92512, 2.85664, 29.1307, 0.92512, 2.85664, 29.1307, 0.92512, -1.64336, 22.8307, 0.92512, -1.64336, 16.8307, 0.92512, -1.64336, 16.5307, 0.92512, -1.04336, 16.5307, 0.92512, 2.25664, 16.8307, 0.92512, 2.85664, 22.8307, 0.92512, 2.85664, 22.8307, 0.92512, -1.64336, 3.3307, 0.92512, 10.9566, 3.3307, 0.92512, 8.85664, 1.8307, 0.92512, 8.85664, 3.3307, 0.92512, 10.9566, 1.8307, 0.92512, 8.85664, 0.9307, 0.92512, 7.95664, -6.2693, 0.92512, 5.55664, -7.1693, 0.92512, 6.75664, -6.8693, 0.92512, 10.9566, 0.9307, 0.92512, 7.95664, 0.9307, 0.92512, 5.55664, -6.2693, 0.92512, 5.55664, 4.5307, 0.92512, 8.85664, 3.3307, 0.92512, 8.85664, 3.3307, 0.92512, 10.9566, 5.4307, 0.92512, 7.95664, 4.5307, 0.92512, 8.85664, 3.3307, 0.92512, 10.9566, 13.2307, 0.92512, 10.9566, 13.2307, 0.92512, 6.45664, 12.6307, 0.92512, 5.55664, 12.6307, 0.92512, 5.55664, 5.4307, 0.92512, 5.55664, 5.4307, 0.92512, 7.95664 )
polygons = [ PoolIntArray( 1, 0, 2 ), PoolIntArray( 2, 0, 3 ), PoolIntArray( 3, 0, 4 ), PoolIntArray( 4, 0, 5 ), PoolIntArray( 8, 7, 6 ), PoolIntArray( 11, 10, 9 ), PoolIntArray( 14, 13, 12 ), PoolIntArray( 16, 15, 17 ), PoolIntArray( 17, 15, 18 ), PoolIntArray( 18, 15, 19 ), PoolIntArray( 23, 22, 20 ), PoolIntArray( 20, 22, 21 ), PoolIntArray( 26, 25, 24 ), PoolIntArray( 30, 29, 27 ), PoolIntArray( 27, 29, 28 ), PoolIntArray( 33, 32, 31 ), PoolIntArray( 36, 35, 34 ), PoolIntArray( 39, 38, 37 ), PoolIntArray( 41, 40, 42 ), PoolIntArray( 42, 40, 45 ), PoolIntArray( 42, 45, 44 ), PoolIntArray( 42, 44, 43 ), PoolIntArray( 49, 48, 46 ), PoolIntArray( 46, 48, 47 ), PoolIntArray( 52, 51, 50 ), PoolIntArray( 56, 55, 53 ), PoolIntArray( 53, 55, 54 ), PoolIntArray( 59, 58, 57 ), PoolIntArray( 62, 61, 60 ), PoolIntArray( 65, 64, 63 ), PoolIntArray( 67, 66, 68 ), PoolIntArray( 68, 66, 69 ), PoolIntArray( 69, 66, 70 ), PoolIntArray( 70, 66, 71 ), PoolIntArray( 75, 74, 72 ), PoolIntArray( 72, 74, 73 ), PoolIntArray( 77, 76, 78 ), PoolIntArray( 78, 76, 79 ), PoolIntArray( 79, 76, 81 ), PoolIntArray( 79, 81, 80 ), PoolIntArray( 83, 82, 84 ), PoolIntArray( 84, 82, 85 ), PoolIntArray( 85, 82, 87 ), PoolIntArray( 85, 87, 86 ), PoolIntArray( 91, 90, 88 ), PoolIntArray( 88, 90, 89 ), PoolIntArray( 95, 94, 92 ), PoolIntArray( 92, 94, 93 ), PoolIntArray( 97, 96, 98 ), PoolIntArray( 98, 96, 99 ), PoolIntArray( 99, 96, 101 ), PoolIntArray( 99, 101, 100 ), PoolIntArray( 104, 103, 102 ), PoolIntArray( 106, 105, 107 ), PoolIntArray( 107, 105, 110 ), PoolIntArray( 107, 110, 109 ), PoolIntArray( 107, 109, 108 ), PoolIntArray( 113, 112, 111 ), PoolIntArray( 116, 115, 114 ), PoolIntArray( 118, 117, 119 ), PoolIntArray( 119, 117, 120 ), PoolIntArray( 120, 117, 121 ), PoolIntArray( 121, 117, 122 ), PoolIntArray( 125, 124, 123 ) ]
cell_size = 0.3
cell_height = 0.1
agent_radius = 1.0

[node name="ProtoTypeLevel" type="Node"]

[node name="ProtoTypeLevel" type="Spatial" parent="."]
script = ExtResource( 8 )
player_health = 5

[node name="UI" parent="ProtoTypeLevel" instance=ExtResource( 3 )]

[node name="DebugPanel2" parent="ProtoTypeLevel/UI/DebugDock/VBoxContainer" index="0"]
margin_top = 104.0
margin_bottom = 204.0
reference_path = NodePath("../../../../Player/StateMachine")
properties = PoolStringArray( "_state_name" )

[node name="Label" parent="ProtoTypeLevel/UI/DebugDock/VBoxContainer" index="1"]
margin_top = 208.0
margin_bottom = 222.0

[node name="DebugPanel3" parent="ProtoTypeLevel/UI/DebugDock/VBoxContainer" index="2"]
margin_top = 226.0
margin_bottom = 326.0
reference_path = NodePath("../../../../EnemyBase/StateMachine/Move")
properties = PoolStringArray( "mov_vec", "transform_", "is_target_reachable_", "distance_to_target_", "enemy_detected" )

[node name="DebugPanel4" parent="ProtoTypeLevel/UI/DebugDock/VBoxContainer" index="3"]
margin_top = 330.0
margin_bottom = 430.0
reference_path = NodePath("../../../../EnemyBase/StateMachine")
properties = PoolStringArray( "_state_name" )

[node name="Environment" type="Node" parent="ProtoTypeLevel"]

[node name="DirectionalLight" type="DirectionalLight" parent="ProtoTypeLevel/Environment"]
transform = Transform( 0.768012, -0.455237, 0.450462, 0.216939, 0.846711, 0.485817, -0.602573, -0.27539, 0.749043, 0, 0, 0 )
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="ProtoTypeLevel/Environment"]
environment = ExtResource( 5 )

[node name="Level" type="Spatial" parent="ProtoTypeLevel"]
transform = Transform( 2, 0, 0, 0, 1, 0, 0, 0, 2, 0, 0, 0 )

[node name="NavigationMeshInstance" type="NavigationMeshInstance" parent="ProtoTypeLevel/Level"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -1.91755, 2.25029, -2.62572 )
navmesh = SubResource( 1 )

[node name="GridMap" type="GridMap" parent="ProtoTypeLevel/Level/NavigationMeshInstance"]
transform = Transform( 0.5, 0, 0, 0, 1, 0, 0, 0, 0.5, 0.204201, 0.0686188, -0.294861 )
mesh_library = ExtResource( 4 )
cell_size = Vector3( 3.95, 0.5, 3.95 )
cell_scale = 2.0
collision_layer = 4
bake_navigation = true
data = {
"cells": PoolIntArray( 1, 0, 655365, 5, 0, 655365, 9, 0, 655365, 13, 0, 655365, 65525, 0, 655365, 65529, 0, 655365, 65533, 0, 655365, 786447, 0, 1048590, 65543, 2, 655369, 65551, 2, 655369, 131059, 2, 655369, 131067, 2, 655369, 720885, 2, 655374, 720889, 2, 655374, 720905, 2, 655374, 720909, 2, 655374, 65537, 3, 1048585, 1, 4, 655365, 5, 4, 655365, 65533, 4, 655365, 786439, 4, 1048590, 851963, 4, 1048590, 65543, 6, 655369, 131067, 6, 655369, 655361, 6, 655374, 655365, 6, 655374, 720893, 6, 655374, 65543, 65530, 655369, 131067, 65530, 655369, 655361, 65530, 655374, 655365, 65530, 655374, 720893, 65530, 655374, 1, 65532, 655365, 5, 65532, 655365, 65533, 65532, 655365, 786439, 65532, 1048590, 851963, 65532, 1048590, 65543, 65534, 655369, 65551, 65534, 655369, 131059, 65534, 655369, 131067, 65534, 655369, 720885, 65534, 655374, 720889, 65534, 655374, 720905, 65534, 655374, 720909, 65534, 655374, 65537, 65535, 1048585 )
}
__meta__ = {
"_editor_clip_": 0,
"_editor_floor_": Vector3( 1, 1, 0 )
}

[node name="Camera" parent="ProtoTypeLevel" instance=ExtResource( 2 )]
transform = Transform( 1, -0.000591808, 0.000299385, 0, 0.451407, 0.892318, -0.000663225, -0.892318, 0.451407, 1.961, 43.613, 17.877 )

[node name="Player" parent="ProtoTypeLevel" instance=ExtResource( 1 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -9.27538, 5.64637, 2.82892 )

[node name="EnemyBase" parent="ProtoTypeLevel" instance=ExtResource( 6 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 20.2673, 16.7279, 2.96456 )

[node name="TransitionDoor" parent="ProtoTypeLevel" instance=ExtResource( 7 )]
transform = Transform( -0.0333471, 0, 0.999444, 0, 1, 0, -0.999444, 0, -0.0333471, -52.2007, 7.48836, -3.72294 )
change_to_scene = "res://Source/Scenes/MainMenu.tscn"

[node name="EnemyBase2" parent="ProtoTypeLevel" instance=ExtResource( 6 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 7.93218, 5.69777, -1.43823 )

[node name="EnemyBase3" parent="ProtoTypeLevel" instance=ExtResource( 6 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -13.8302, 5.69777, -17.1255 )

[node name="EnemyBase4" parent="ProtoTypeLevel" instance=ExtResource( 6 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 11.1245, 5.69777, -17.1255 )

[node name="EnemyBase5" parent="ProtoTypeLevel" instance=ExtResource( 6 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 11.1245, 5.69777, 8.87449 )

[node name="EnemyBase6" parent="ProtoTypeLevel" instance=ExtResource( 6 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -10.8755, 5.69777, 8.87449 )

[editable path="ProtoTypeLevel/UI"]
[editable path="ProtoTypeLevel/UI/DebugDock"]
[editable path="ProtoTypeLevel/Player"]
[editable path="ProtoTypeLevel/EnemyBase"]
